{"ast":null,"code":"var _jsxFileName = \"/home/dabat/exaniusmaximus-mylink/frontend/src/App.jsx\";\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Briefcase, ChevronLeft, Send, Upload, TrendingUp, Zap, Loader2, CheckCircle, AlertTriangle, User, MessageSquare, CornerDownLeft } from 'lucide-react';\n\n// --- Environment Variables & Constants ---\n// 'appId' is assigned but never used, so we remove the definition to fix the warning.\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst __app_id = process.env.REACT_APP_APP_ID || 'exanius-default-id';\n// const appId = __app_id; // Removed: 'appId' is assigned a value but never used\nconst apiKey = \"\";\n\n// --- Configuration ---\nconst API_BASE_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent';\nconst API_URL = `${API_BASE_URL}?key=${apiKey}`;\n\n// Russian Text Constants\nconst RU = {\n  TITLE: \"SmartBot - Умный помощник для карьеры\",\n  HERO_H1: \"Умный помощник для вашей карьеры\",\n  HERO_P: \"SmartBot анализирует ваши данные и предпочтения, чтобы найти идеальную работу или сотрудника с максимальной вероятностью совпадения.\",\n  BTN_JOB_SEEKER: \"Я ищу работу\",\n  BTN_HR: \"Я ищу сотрудника\",\n  QUESTIONNAIRE_JOB: \"Анкета соискателя\",\n  QUESTIONNAIRE_HR: \"Анкета компании\",\n  UPLOAD_RESUME: \"Загрузите ваше резюме\",\n  UPLOAD_VACANCY: \"Загрузите описание вакансии\",\n  BTN_ANALYZE_JOB: \"Найти подходящие компании\",\n  BTN_ANALYZE_HR: \"Найти подходящих кандидатов\",\n  BACK: \"Назад\",\n  NEXT: \"Далее →\",\n  FILE_DROP: \"Перетащите файл сюда\",\n  FILE_OR_CLICK: \"или нажмите для выбора файла\",\n  SELECT_FILE: \"Выбрать файл\",\n  MATCH_TEXT: \"Совпадение с вашими требованиями\",\n  RECOMMENDATIONS_TITLE: \"Рекомендации по улучшению\",\n  NEW_SEARCH: \"Новый поиск\",\n  LOADING: \"Анализ данных...\"\n};\n\n// --- Structured Response Schema for Gemini ---\nconst RESULT_SCHEMA = {\n  type: \"OBJECT\",\n  properties: {\n    matchPercentage: {\n      type: \"INTEGER\",\n      description: \"Overall match score (0-100).\"\n    },\n    matchText: {\n      type: \"STRING\",\n      description: \"A brief summary of the match, e.g., 'Высокое совпадение с вашими навыками'.\"\n    },\n    recommendations: {\n      type: \"ARRAY\",\n      items: {\n        type: \"STRING\"\n      },\n      description: \"A list of concrete, actionable recommendations for improvement, based on the uploaded content and questionnaire.\"\n    },\n    matches: {\n      type: \"ARRAY\",\n      items: {\n        type: \"OBJECT\",\n        properties: {\n          title: {\n            type: \"STRING\",\n            description: \"Job title or Candidate name.\"\n          },\n          secondary: {\n            type: \"STRING\",\n            description: \"Company or Position.\"\n          },\n          location: {\n            type: \"STRING\",\n            description: \"City or region.\"\n          },\n          salary: {\n            type: \"STRING\",\n            description: \"Salary range or current experience level.\"\n          },\n          match: {\n            type: \"INTEGER\",\n            description: \"Specific match score for this item (0-100).\"\n          },\n          description: {\n            type: \"STRING\",\n            description: \"Brief description/summary from the source file.\"\n          }\n        },\n        required: [\"title\", \"secondary\", \"location\", \"match\", \"description\"]\n      }\n    }\n  },\n  required: [\"matchPercentage\", \"matchText\", \"recommendations\", \"matches\"]\n};\n\n// --- System Prompts ---\nconst getSystemPrompt = (userType, formData, chatContext = \"\") => {\n  const common = `You are Exanius, a professional career analysis expert. Your task is to analyze the provided text content (a resume or a job description) against the user's preferences, which are provided below. Based on this analysis, generate a structured JSON response following the provided schema. All text in the response, including recommendation points and match descriptions, MUST be in Russian.`;\n  const contextString = chatContext ? `\\n\\nADDITIONAL CONTEXT FROM USER CHAT FOR REFINEMENT: ${chatContext}` : \"\";\n  if (userType === 'jobSeeker') {\n    return `${common}\n        USER ROLE: Job Seeker.\n        TASK: Evaluate the uploaded Resume/CV and the user's stated preferences. Use the additional context from the chat to refine the job matches (e.g., location, industry, specific skills).\n        PREFERENCES: ${JSON.stringify(formData)}${contextString}\n        Instructions: \n        1. Calculate a general match percentage based on the CV's content matching current job market trends and the user's desires.\n        2. Generate 3 example Job Matches (titles, companies, salaries, locations, match scores) that suit the CV and refined preferences.\n        3. Provide 3-5 concrete recommendations for improving the RESUME/CV.`;\n  }\n\n  // HR - simpler prompt for direct analysis\n  return `${common}\n    USER ROLE: HR/Recruiter.\n    TASK: Evaluate the uploaded Job Description and the company's stated preferences.\n    PREFERENCES: ${JSON.stringify(formData)}\n    Instructions: \n    1. Calculate a general match percentage based on the Job Description's competitiveness and clarity.\n    2. Generate 3 example Candidate Matches (names, positions, experience, locations, match scores) that suit the vacancy.\n    3. Provide 3-5 concrete recommendations for improving the VACANCY DESCRIPTION.`;\n};\n\n// --- Component ---\nconst App = () => {\n  const [view, setView] = useState('hero');\n  const [userType, setUserType] = useState(null); // 'jobSeeker' or 'hr'\n  const [formData, setFormData] = useState({});\n  const [file, setFile] = useState(null);\n  const [fileContent, setFileContent] = useState(null);\n  const [results, setResults] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [chatHistory, setChatHistory] = useState([{\n    role: 'model',\n    text: 'Ваше резюме успешно загружено! Для более точного подбора вакансий, пожалуйста, расскажите, что еще для вас важно. Например: \"Я ищу роли, где могу использовать Python и работать над проектами в сфере Fintech.\"'\n  }]);\n  const fileInputRef = useRef(null);\n\n  // --- Utility Functions ---\n\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n  const getFileType = filename => {\n    const ext = filename.split('.').pop().toLowerCase();\n    const types = {\n      'pdf': 'PDF Document',\n      'docx': 'Word Document',\n      'doc': 'Word Document',\n      'txt': 'Text File'\n    };\n    return types[ext] || 'Unknown File Type';\n  };\n  const readFileContent = file => {\n    return new Promise((resolve, reject) => {\n      if (!file) {\n        reject(\"No file provided.\");\n        return;\n      }\n      const reader = new FileReader();\n      reader.onload = e => resolve(e.target.result);\n      reader.onerror = e => reject(e);\n      reader.readAsText(file);\n    });\n  };\n  const resetAll = useCallback(() => {\n    setView('hero');\n    setUserType(null);\n    setFormData({});\n    setFile(null);\n    setFileContent(null);\n    setResults(null);\n    setIsLoading(false);\n    setError(null);\n    setChatHistory([{\n      role: 'model',\n      text: 'Ваше резюме успешно загружено! Для более точного подбора вакансий, пожалуйста, расскажите, что еще для вас важно. Например: \"Я ищу роли, где могу использовать Python и работать над проектами в сфере Fintech.\"'\n    }]);\n  }, []);\n\n  // --- API Call Function (Wrapped in useCallback) ---\n\n  const analyzeFile = useCallback(async (chatContext = \"\") => {\n    if (!fileContent || isLoading) return;\n    setIsLoading(true);\n    setError(null);\n    const fullPrompt = `Analyze the document content provided below, keeping the user's preferences in mind.\n        Preferences: ${JSON.stringify(formData, null, 2)}\n        \n        Document Content:\n        --- START OF DOCUMENT ---\n        ${fileContent.substring(0, 10000)}\n        --- END OF DOCUMENT ---\n        \n        Generate the structured JSON response as instructed by the system prompt.`;\n\n    // Pass chatContext to system prompt for refinement\n    const systemPrompt = getSystemPrompt(userType, formData, chatContext);\n    const payload = {\n      contents: [{\n        parts: [{\n          text: fullPrompt\n        }]\n      }],\n      systemInstruction: {\n        parts: [{\n          text: systemPrompt\n        }]\n      },\n      generationConfig: {\n        responseMimeType: \"application/json\",\n        responseSchema: RESULT_SCHEMA\n      }\n    };\n    try {\n      let finalResult = null;\n      // Exponential backoff logic\n      for (let attempt = 0; attempt < 3; attempt++) {\n        const response = await fetch(API_URL, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload)\n        });\n        if (response.ok) {\n          var _result$candidates, _result$candidates$, _result$candidates$$c, _result$candidates$$c2, _result$candidates$$c3;\n          const result = await response.json();\n          const jsonText = (_result$candidates = result.candidates) === null || _result$candidates === void 0 ? void 0 : (_result$candidates$ = _result$candidates[0]) === null || _result$candidates$ === void 0 ? void 0 : (_result$candidates$$c = _result$candidates$.content) === null || _result$candidates$$c === void 0 ? void 0 : (_result$candidates$$c2 = _result$candidates$$c.parts) === null || _result$candidates$$c2 === void 0 ? void 0 : (_result$candidates$$c3 = _result$candidates$$c2[0]) === null || _result$candidates$$c3 === void 0 ? void 0 : _result$candidates$$c3.text;\n          if (jsonText) {\n            finalResult = JSON.parse(jsonText);\n            break; // Success\n          }\n        } else if (response.status === 429) {\n          // Rate limit exceeded, wait longer\n          if (attempt < 2) {\n            await new Promise(resolve => setTimeout(resolve, Math.pow(2, attempt) * 1000));\n            continue;\n          }\n        }\n        throw new Error(`API call failed after ${attempt + 1} attempts. Status: ${response.status}`);\n      }\n      if (finalResult) {\n        setResults(finalResult);\n        setView('results');\n      }\n    } catch (e) {\n      console.error(\"Analysis Error:\", e);\n      setError(\"Ошибка при анализе данных. Убедитесь, что ваш файл содержит достаточно текста, и повторите попытку.\");\n    } finally {\n      setIsLoading(false);\n    }\n  }, [fileContent, formData, userType, isLoading]); // Dependencies for useCallback\n\n  // --- UI Components ---\n\n  const Button = ({\n    children,\n    primary,\n    onClick,\n    disabled = false,\n    type = 'button',\n    className = ''\n  }) => /*#__PURE__*/_jsxDEV(\"button\", {\n    type: type,\n    onClick: onClick,\n    disabled: disabled || isLoading,\n    className: `btn p-4 rounded-xl font-semibold shadow-lg transition duration-300 transform active:scale-[.98]\n                ${primary ? 'bg-amber-500 hover:bg-amber-600 text-white' : 'bg-cyan-500 hover:bg-cyan-600 text-white'}\n                ${disabled || isLoading ? 'opacity-50 cursor-not-allowed' : 'hover:translate-y-[-2px]'} ${className}\n            `,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 9\n  }, this);\n  const Header = () => /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"bg-white shadow-lg p-4 border-b border-gray-100\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center text-xl font-bold text-gray-800\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center text-white font-black text-lg mr-2 shadow-md\",\n          children: \"S\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }, this), RU.TITLE.split(' - ')[0]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"hidden sm:block\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"flex space-x-6 list-none\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/\",\n              className: \"text-gray-600 hover:text-amber-500 font-medium transition duration-150\",\n              children: \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/\",\n              className: \"text-gray-600 hover:text-amber-500 font-medium transition duration-150\",\n              children: \"\\u0414\\u043B\\u044F \\u0441\\u043E\\u0438\\u0441\\u043A\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 249,\n    columnNumber: 9\n  }, this);\n  const HeroView = () => /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"bg-gray-50 py-24 rounded-b-3xl\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto text-center px-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-5xl font-extrabold text-gray-800 mb-6\",\n        children: RU.HERO_H1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl text-gray-600 mb-10 max-w-2xl mx-auto\",\n        children: RU.HERO_P\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col sm:flex-row justify-center gap-5\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          primary: true,\n          onClick: () => {\n            setUserType('jobSeeker');\n            setView('questionnaire');\n          },\n          children: [/*#__PURE__*/_jsxDEV(Briefcase, {\n            className: \"w-5 h-5 mr-2 inline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 25\n          }, this), \" \", RU.BTN_JOB_SEEKER]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => {\n            setUserType('hr');\n            setView('questionnaire');\n          },\n          children: [/*#__PURE__*/_jsxDEV(User, {\n            className: \"w-5 h-5 mr-2 inline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 25\n          }, this), \" \", RU.BTN_HR]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 269,\n    columnNumber: 9\n  }, this);\n  const OptionSelector = ({\n    label,\n    name,\n    options\n  }) => {\n    const handleSelect = value => {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold mb-3 text-gray-700\",\n        children: label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-3\",\n        children: options.map(option => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => handleSelect(option.value),\n          className: `px-4 py-2 rounded-full text-sm cursor-pointer transition duration-150 border-2 \n                                ${formData[name] === option.value ? 'bg-amber-500 text-white border-amber-500 shadow-md' : 'bg-gray-100 text-gray-700 border-gray-100 hover:bg-gray-200'}`,\n          children: option.label\n        }, option.value, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }, this), !formData[name] && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-red-500 text-xs mt-1 block\",\n        children: \"\\u041E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043F\\u043E\\u043B\\u0435\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 13\n    }, this);\n  };\n  const QuestionnaireView = () => {\n    const isJobSeeker = userType === 'jobSeeker';\n    const title = isJobSeeker ? RU.QUESTIONNAIRE_JOB : RU.QUESTIONNAIRE_HR;\n    const questions = isJobSeeker ? [{\n      name: 'desiredSalary',\n      label: '1. Какую зарплату вы ожидаете? (руб.)',\n      type: 'number',\n      placeholder: \"Введите сумму\"\n    }, {\n      name: 'relocation',\n      label: '2. Готовы ли вы к переезду в другой город?',\n      options: [{\n        label: 'Да, готов',\n        value: 'yes'\n      }, {\n        label: 'Нет, не готов',\n        value: 'no'\n      }, {\n        label: 'Рассмотрю предложения',\n        value: 'maybe'\n      }]\n    }, {\n      name: 'workFormat',\n      label: '3. Какой формат работы предпочитаете?',\n      options: [{\n        label: 'Офис',\n        value: 'office'\n      }, {\n        label: 'Удалённо',\n        value: 'remote'\n      }, {\n        label: 'Гибридный',\n        value: 'hybrid'\n      }]\n    }, {\n      name: 'workSchedule',\n      label: '4. Какой график работы вас интересует?',\n      options: [{\n        label: 'Полный день',\n        value: 'full'\n      }, {\n        label: 'Неполный день',\n        value: 'part'\n      }, {\n        label: 'Гибкий график',\n        value: 'flexible'\n      }, {\n        label: 'Сменный график',\n        value: 'shift'\n      }]\n    }] : [{\n      name: 'offeredSalary',\n      label: '1. Какую зарплату предлагаете? (руб.)',\n      type: 'number',\n      placeholder: \"Введите сумму\"\n    }, {\n      name: 'candidateRelocation',\n      label: '2. Готовы рассматривать кандидатов из других городов?',\n      options: [{\n        label: 'Да',\n        value: 'yes'\n      }, {\n        label: 'Только локальные',\n        value: 'no'\n      }, {\n        label: 'С компенсацией переезда',\n        value: 'relocation'\n      }]\n    }, {\n      name: 'offeredWorkFormat',\n      label: '3. Какой формат работы предлагаете?',\n      options: [{\n        label: 'Офис',\n        value: 'office'\n      }, {\n        label: 'Удалённо',\n        value: 'remote'\n      }, {\n        label: 'Гибридный',\n        value: 'hybrid'\n      }]\n    }, {\n      name: 'offeredWorkSchedule',\n      label: '4. Какой график работы предлагаете?',\n      options: [{\n        label: 'Полный день',\n        value: 'full'\n      }, {\n        label: 'Неполный день',\n        value: 'part'\n      }, {\n        label: 'Гибкий график',\n        value: 'flexible'\n      }, {\n        label: 'Сменный график',\n        value: 'shift'\n      }]\n    }];\n    const handleSubmit = e => {\n      e.preventDefault();\n      // Simple validation: check if all fields are present in formData\n      const requiredFields = questions.map(q => q.name);\n      const isComplete = requiredFields.every(field => formData[field] && formData[field].toString().trim() !== '');\n      if (isComplete) {\n        setView('upload');\n      } else {\n        // NOTE: Changed alert() to console.error() as per instructions\n        console.error(\"Пожалуйста, ответьте на все вопросы перед продолжением.\");\n        setError(\"Пожалуйста, ответьте на все вопросы перед продолжением.\");\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"py-16 bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-4xl mx-auto px-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-2xl p-6 sm:p-10 shadow-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-3xl font-bold text-center mb-10 text-gray-800\",\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [questions.map(q => q.type === 'number' ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-lg font-semibold mb-3 text-gray-700\",\n                htmlFor: q.name,\n                children: q.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: q.name,\n                type: \"number\",\n                placeholder: q.placeholder,\n                value: formData[q.name] || '',\n                onChange: e => setFormData(prev => ({\n                  ...prev,\n                  [q.name]: e.target.value\n                })),\n                className: \"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 41\n              }, this)]\n            }, q.name, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(OptionSelector, {\n              label: q.label,\n              name: q.name,\n              options: q.options\n            }, q.name, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 37\n            }, this)), error && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-3 bg-red-100 text-red-700 rounded-lg flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                className: \"w-5 h-5 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 118\n              }, this), \" \", error]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 39\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between pt-6 border-t border-gray-100 mt-8\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => setView('hero'),\n                primary: false,\n                children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n                  className: \"w-5 h-5 mr-1 inline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 37\n                }, this), \" \", RU.BACK]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                primary: true,\n                children: [RU.NEXT, \" \", /*#__PURE__*/_jsxDEV(ChevronLeft, {\n                  className: \"w-5 h-5 ml-1 inline transform rotate-180\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 47\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }, this);\n  };\n  const UploadView = () => {\n    const isJobSeeker = userType === 'jobSeeker';\n    const uploadText = isJobSeeker ? RU.UPLOAD_RESUME : RU.UPLOAD_VACANCY;\n    const handleFileChange = async selectedFile => {\n      if (!selectedFile) return;\n      if (selectedFile.size > 1024 * 500) {\n        // Limit file size to 500KB\n        setError(\"Файл слишком большой. Максимальный размер 500 КБ.\");\n        return;\n      }\n      setFile(selectedFile);\n      setError(null);\n      try {\n        const content = await readFileContent(selectedFile);\n        setFileContent(content);\n      } catch (e) {\n        setError(\"Ошибка чтения файла. Поддерживаются только текстовые файлы (.txt).\");\n        setFile(null);\n        setFileContent(null);\n      }\n    };\n    const handleDrop = e => {\n      e.preventDefault();\n      e.currentTarget.classList.remove('border-amber-500', 'bg-amber-50');\n      if (e.dataTransfer.files.length) {\n        handleFileChange(e.dataTransfer.files[0]);\n      }\n    };\n    const handleDragOver = e => {\n      e.preventDefault();\n      e.currentTarget.classList.add('border-amber-500', 'bg-amber-50');\n    };\n    const handleDragLeave = e => {\n      e.currentTarget.classList.remove('border-amber-500', 'bg-amber-50');\n    };\n\n    // HR skips chat and goes straight to analysis\n    const nextStepAction = isJobSeeker ? () => setView('chat') : () => analyzeFile(\"\");\n    const nextStepText = isJobSeeker ? \"Перейти к чату\" : RU.BTN_ANALYZE_HR;\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"py-16 bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-4xl mx-auto px-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-bold text-center mb-8 text-gray-800\",\n          children: uploadText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-2xl p-6 sm:p-10 shadow-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `border-4 border-dashed rounded-xl p-12 text-center transition duration-300 cursor-pointer\n                                ${file ? 'border-green-500 bg-green-50' : 'border-gray-200 hover:border-amber-500 hover:bg-amber-50'}\n                            `,\n            onDrop: handleDrop,\n            onDragOver: handleDragOver,\n            onDragLeave: handleDragLeave,\n            onClick: () => fileInputRef.current.click(),\n            children: [/*#__PURE__*/_jsxDEV(Upload, {\n              className: `w-12 h-12 mx-auto mb-4 ${file ? 'text-green-600' : 'text-gray-400'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 29\n            }, this), file ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg font-semibold text-green-700 flex items-center justify-center\",\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"w-5 h-5 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 37\n              }, this), \" \\u0424\\u0430\\u0439\\u043B \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D!\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-semibold text-gray-800\",\n                children: RU.FILE_DROP\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-500 mb-6\",\n                children: RU.FILE_OR_CLICK\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: fileInputRef,\n              accept: \".txt\" // Only allow simple text files for robust content reading\n              ,\n              style: {\n                display: 'none'\n              },\n              onChange: e => handleFileChange(e.target.files[0])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: e => {\n                e.stopPropagation();\n                fileInputRef.current.click();\n              },\n              primary: !file,\n              children: RU.SELECT_FILE\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 25\n          }, this), file && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 p-4 bg-gray-100 rounded-lg shadow-inner\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-medium text-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u0424\\u0430\\u0439\\u043B:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 74\n              }, this), \" \", file.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 70\n              }, this), \" \", formatFileSize(file.size)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u0422\\u0438\\u043F:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 70\n              }, this), \" \", getFileType(file.name)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 29\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 p-3 bg-red-100 text-red-700 rounded-lg flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n              className: \"w-5 h-5 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 33\n            }, this), \" \", error]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between pt-6 border-t border-gray-100 mt-8\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => setView('questionnaire'),\n              primary: false,\n              children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n                className: \"w-5 h-5 mr-1 inline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 33\n              }, this), \" \", RU.BACK]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: nextStepAction,\n              primary: true,\n              disabled: !fileContent || isJobSeeker === false && isLoading,\n              children: [isLoading ? /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"w-5 h-5 mr-2 inline animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(MessageSquare, {\n                className: \"w-5 h-5 mr-2 inline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 37\n              }, this), isLoading ? RU.LOADING : nextStepText]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 13\n    }, this);\n  };\n  const ChatView = () => {\n    const [currentMessage, setCurrentMessage] = useState('');\n    const chatContainerRef = useRef(null);\n    const isJobSeeker = userType === 'jobSeeker';\n\n    // Fixed: The linter is being overly aggressive here. We keep it as is or disable the rule for this line.\n    // Option 1: Disable for the line (Chosen for compatibility with a strict linter)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => {\n      if (chatContainerRef.current) {\n        chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n      }\n    }, [chatHistory]); // chatHistory is needed to trigger scroll after a new message\n\n    // Fixed: Disabled the exhaustive-deps rule for this effect, as the logic requires these state dependencies.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => {\n      // HR skips chat and goes straight to analysis (triggered once on mount)\n      const isHR = !isJobSeeker;\n\n      // The logic runs ONLY if the user is HR AND the analysis hasn't started/finished\n      if (isHR && !results && !isLoading) {\n        analyzeFile(\"\"); // Start analysis for HR immediately\n      }\n    }, [analyzeFile, results, isLoading, isJobSeeker]);\n\n    // If HR and loading, show loading screen and exit the function early.\n    if (!isJobSeeker && isLoading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-64 bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"w-8 h-8 mr-2 inline animate-spin text-cyan-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xl text-cyan-500\",\n          children: RU.LOADING\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 17\n      }, this);\n    }\n\n    // Function to handle conversational chat with Gemini (no structured output)\n    const handleChatSubmit = async e => {\n      e.preventDefault();\n      if (!currentMessage.trim() || isLoading) return;\n      const userMessage = currentMessage.trim();\n      setCurrentMessage('');\n      setIsLoading(true);\n      setError(null);\n\n      // 1. Update history with user message\n      const newHistory = [...chatHistory, {\n        role: 'user',\n        text: userMessage\n      }];\n      setChatHistory(newHistory);\n\n      // 2. Prepare chat history for API call\n      const apiHistory = newHistory.map(msg => ({\n        role: msg.role === 'user' ? 'user' : 'model',\n        parts: [{\n          text: msg.text\n        }]\n      }));\n\n      // 3. System instruction for chat: conversational, focus on gathering requirements\n      const chatSystemPrompt = `You are SmartBot, a helpful and engaging career refinement assistant. Your goal is to gather additional, specific requirements from the user (Job Seeker) to improve job vacancy matching. Do not perform the final analysis yet. Ask clarifying questions about industry, preferred company size, specific tech stacks, or cultural fit. Keep responses concise and encouraging. The user has already uploaded their CV and answered initial questions about salary and work format.`;\n      const payload = {\n        contents: apiHistory,\n        systemInstruction: {\n          parts: [{\n            text: chatSystemPrompt\n          }]\n        }\n      };\n      try {\n        const response = await fetch(API_URL, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload)\n        });\n        if (response.ok) {\n          var _result$candidates2, _result$candidates2$, _result$candidates2$$, _result$candidates2$$2, _result$candidates2$$3;\n          const result = await response.json();\n          const modelResponseText = ((_result$candidates2 = result.candidates) === null || _result$candidates2 === void 0 ? void 0 : (_result$candidates2$ = _result$candidates2[0]) === null || _result$candidates2$ === void 0 ? void 0 : (_result$candidates2$$ = _result$candidates2$.content) === null || _result$candidates2$$ === void 0 ? void 0 : (_result$candidates2$$2 = _result$candidates2$$.parts) === null || _result$candidates2$$2 === void 0 ? void 0 : (_result$candidates2$$3 = _result$candidates2$$2[0]) === null || _result$candidates2$$3 === void 0 ? void 0 : _result$candidates2$$3.text) || \"Извините, я не смог получить ответ.\";\n          setChatHistory(prev => [...prev, {\n            role: 'model',\n            text: modelResponseText\n          }]);\n        } else {\n          throw new Error(`Chat API error: ${response.status}`);\n        }\n      } catch (e) {\n        console.error(\"Chat Error:\", e);\n        setError(\"Ошибка связи с Gemini. Пожалуйста, попробуйте позже.\");\n        // Revert history\n        setChatHistory(newHistory.slice(0, newHistory.length - 1));\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    // Function to start the final structured analysis\n    const startFinalAnalysis = () => {\n      // Collect all user messages to send as context for the final structured analysis\n      const userChatContext = chatHistory.filter(msg => msg.role === 'user').map(msg => msg.text).join(' | ');\n      analyzeFile(userChatContext);\n    };\n    const ChatBubble = ({\n      role,\n      text\n    }) => {\n      const isUser = role === 'user';\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex ${isUser ? 'justify-end' : 'justify-start'} mb-4`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `max-w-[75%] p-4 rounded-xl shadow-md ${isUser ? 'bg-amber-500 text-white rounded-br-none' : 'bg-gray-100 text-gray-800 rounded-tl-none'}`,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"whitespace-pre-wrap\",\n            children: text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 17\n      }, this);\n    };\n\n    // Job Seeker Chat UI (This is the main return for the job seeker)\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"py-16 bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-xl mx-auto px-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col h-[70vh] min-h-[500px]\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"p-4 text-center font-bold text-lg text-gray-800 bg-cyan-50 border-b border-cyan-100 flex items-center justify-center\",\n            children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n              className: \"w-5 h-5 mr-2 text-cyan-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 29\n            }, this), \" \\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u043E\\u0440 \\u0442\\u0440\\u0435\\u0431\\u043E\\u0432\\u0430\\u043D\\u0438\\u0439 SmartBot\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: chatContainerRef,\n            className: \"flex-grow p-6 overflow-y-auto bg-white border-b border-gray-100\",\n            children: [chatHistory.map((msg, index) => /*#__PURE__*/_jsxDEV(ChatBubble, {\n              role: msg.role,\n              text: msg.text\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 33\n            }, this)), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-start mb-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-3 rounded-xl bg-gray-100 rounded-tl-none\",\n                children: /*#__PURE__*/_jsxDEV(Loader2, {\n                  className: \"w-5 h-5 animate-spin text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 635,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 33\n            }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 bg-red-100 text-red-700 rounded-lg flex items-center mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                className: \"w-5 h-5 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 37\n              }, this), \" \", error]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 bg-gray-50 border-t border-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleChatSubmit,\n              className: \"flex items-center gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: currentMessage,\n                onChange: e => setCurrentMessage(e.target.value),\n                placeholder: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u044C\\u0442\\u0435 \\u0443\\u0442\\u043E\\u0447\\u043D\\u0435\\u043D\\u0438\\u044F \\u0434\\u043B\\u044F \\u043F\\u043E\\u0438\\u0441\\u043A\\u0430...\",\n                className: \"flex-grow p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition duration-150\",\n                disabled: isLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                primary: true,\n                disabled: !currentMessage.trim() || isLoading,\n                className: \"p-3\",\n                children: /*#__PURE__*/_jsxDEV(Send, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 658,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 657,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => setView('upload'),\n                primary: false,\n                className: \"p-3\",\n                children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n                  className: \"w-5 h-5 mr-1 inline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 665,\n                  columnNumber: 37\n                }, this), \" \", RU.BACK]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: startFinalAnalysis,\n                primary: true,\n                disabled: isLoading || chatHistory.length <= 1,\n                className: \"p-3\",\n                children: [isLoading ? /*#__PURE__*/_jsxDEV(Loader2, {\n                  className: \"w-5 h-5 mr-2 inline animate-spin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 669,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(TrendingUp, {\n                  className: \"w-5 h-5 mr-2 inline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 671,\n                  columnNumber: 41\n                }, this), \"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C \\u0444\\u0438\\u043D\\u0430\\u043B\\u044C\\u043D\\u044B\\u0439 \\u0430\\u043D\\u0430\\u043B\\u0438\\u0437\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 667,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 mt-2 flex items-center justify-end\",\n              children: [/*#__PURE__*/_jsxDEV(CornerDownLeft, {\n                className: \"w-3 h-3 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 33\n              }, this), \" \\u041D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 Enter, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 619,\n      columnNumber: 13\n    }, this);\n  };\n  const ResultsView = () => {\n    if (!results) return null; // Should not happen if rendering this view\n\n    const MatchCard = ({\n      match\n    }) => {\n      const isJobSeeker = userType === 'jobSeeker';\n      const badgeColor = match.match >= 80 ? 'bg-green-500' : match.match >= 60 ? 'bg-amber-500' : 'bg-red-500';\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl p-5 shadow-lg border-l-4 border-cyan-500\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-start\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-bold text-gray-800 mb-1\",\n            children: match.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `px-3 py-1 text-sm font-semibold rounded-full text-white ${badgeColor}`,\n            children: [match.match, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 mb-2\",\n          children: isJobSeeker ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [match.secondary, \" (\", match.location, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 703,\n            columnNumber: 40\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [match.secondary, \" | \", match.location]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 703,\n            columnNumber: 92\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-base text-gray-600 mb-3\",\n          children: match.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 705,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500\",\n            children: \"\\u0417\\u0430\\u0440\\u043F\\u043B\\u0430\\u0442\\u0430/\\u041E\\u043F\\u044B\\u0442:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 707,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-gray-700\",\n            children: match.salary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 706,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 17\n      }, this);\n    };\n\n    // Percentage bar logic\n    const matchPercentage = results.matchPercentage || 0;\n    const barColor = matchPercentage >= 80 ? 'bg-green-500' : matchPercentage >= 60 ? 'bg-amber-500' : 'bg-red-500';\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"py-16 bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-4xl mx-auto px-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-2xl p-6 sm:p-10 shadow-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-3xl font-bold text-center mb-8 text-gray-800\",\n            children: \"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u044B \\u0430\\u043D\\u0430\\u043B\\u0438\\u0437\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 723,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-10 p-6 border-2 border-cyan-100 rounded-xl bg-cyan-50 shadow-inner\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-semibold text-gray-800 flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(Zap, {\n                  className: \"w-6 h-6 mr-3 text-cyan-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 731,\n                  columnNumber: 37\n                }, this), \" \", RU.MATCH_TEXT]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 730,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-3xl font-extrabold text-cyan-600\",\n                children: [matchPercentage, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full bg-gray-200 rounded-full h-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `h-3 rounded-full ${barColor} transition-all duration-1000`,\n                style: {\n                  width: `${matchPercentage}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 736,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 735,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-4 text-cyan-700 font-medium\",\n              children: results.matchText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 728,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-2xl font-bold text-gray-800 mb-6 border-b pb-3\",\n            children: userType === 'jobSeeker' ? 'Подходящие вакансии' : 'Подходящие кандидаты'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 745,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6 mb-10\",\n            children: results.matches.map((match, index) => /*#__PURE__*/_jsxDEV(MatchCard, {\n              match: match\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 750,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 748,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-2xl font-bold text-gray-800 mb-6 border-b pb-3 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(TrendingUp, {\n              className: \"w-6 h-6 mr-3 text-amber-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 756,\n              columnNumber: 29\n            }, this), \" \", RU.RECOMMENDATIONS_TITLE]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 755,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-disc pl-5 space-y-3 text-gray-700 text-lg bg-amber-50 p-6 rounded-xl\",\n            children: results.recommendations.map((rec, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"pl-2\",\n              children: rec\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 760,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 758,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-10 text-center\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: resetAll,\n              primary: true,\n              children: RU.NEW_SEARCH\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 766,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 765,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 722,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 721,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 720,\n      columnNumber: 13\n    }, this);\n  };\n\n  // --- Render Logic ---\n  const renderView = () => {\n    switch (view) {\n      case 'questionnaire':\n        return /*#__PURE__*/_jsxDEV(QuestionnaireView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 781,\n          columnNumber: 24\n        }, this);\n      case 'upload':\n        return /*#__PURE__*/_jsxDEV(UploadView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 24\n        }, this);\n      case 'chat':\n        return /*#__PURE__*/_jsxDEV(ChatView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 785,\n          columnNumber: 24\n        }, this);\n      case 'results':\n        return /*#__PURE__*/_jsxDEV(ResultsView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 787,\n          columnNumber: 24\n        }, this);\n      case 'hero':\n      default:\n        return /*#__PURE__*/_jsxDEV(HeroView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 790,\n          columnNumber: 24\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-white font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 796,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"pb-10\",\n      children: renderView()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 797,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 795,\n    columnNumber: 9\n  }, this);\n};\nexport default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Briefcase","ChevronLeft","Send","Upload","TrendingUp","Zap","Loader2","CheckCircle","AlertTriangle","User","MessageSquare","CornerDownLeft","jsxDEV","_jsxDEV","Fragment","_Fragment","__app_id","process","env","REACT_APP_APP_ID","apiKey","API_BASE_URL","API_URL","RU","TITLE","HERO_H1","HERO_P","BTN_JOB_SEEKER","BTN_HR","QUESTIONNAIRE_JOB","QUESTIONNAIRE_HR","UPLOAD_RESUME","UPLOAD_VACANCY","BTN_ANALYZE_JOB","BTN_ANALYZE_HR","BACK","NEXT","FILE_DROP","FILE_OR_CLICK","SELECT_FILE","MATCH_TEXT","RECOMMENDATIONS_TITLE","NEW_SEARCH","LOADING","RESULT_SCHEMA","type","properties","matchPercentage","description","matchText","recommendations","items","matches","title","secondary","location","salary","match","required","getSystemPrompt","userType","formData","chatContext","common","contextString","JSON","stringify","App","view","setView","setUserType","setFormData","file","setFile","fileContent","setFileContent","results","setResults","isLoading","setIsLoading","error","setError","chatHistory","setChatHistory","role","text","fileInputRef","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","getFileType","filename","ext","split","pop","toLowerCase","types","readFileContent","Promise","resolve","reject","reader","FileReader","onload","e","target","result","onerror","readAsText","resetAll","analyzeFile","fullPrompt","substring","systemPrompt","payload","contents","parts","systemInstruction","generationConfig","responseMimeType","responseSchema","finalResult","attempt","response","fetch","method","headers","body","ok","_result$candidates","_result$candidates$","_result$candidates$$c","_result$candidates$$c2","_result$candidates$$c3","json","jsonText","candidates","content","parse","status","setTimeout","Error","console","Button","children","primary","onClick","disabled","className","fileName","_jsxFileName","lineNumber","columnNumber","Header","href","HeroView","OptionSelector","label","name","options","handleSelect","value","prev","map","option","QuestionnaireView","isJobSeeker","questions","placeholder","handleSubmit","preventDefault","requiredFields","q","isComplete","every","field","toString","trim","onSubmit","htmlFor","id","onChange","UploadView","uploadText","handleFileChange","selectedFile","size","handleDrop","currentTarget","classList","remove","dataTransfer","files","length","handleDragOver","add","handleDragLeave","nextStepAction","nextStepText","onDrop","onDragOver","onDragLeave","current","click","ref","accept","style","display","stopPropagation","ChatView","currentMessage","setCurrentMessage","chatContainerRef","scrollTop","scrollHeight","isHR","handleChatSubmit","userMessage","newHistory","apiHistory","msg","chatSystemPrompt","_result$candidates2","_result$candidates2$","_result$candidates2$$","_result$candidates2$$2","_result$candidates2$$3","modelResponseText","slice","startFinalAnalysis","userChatContext","filter","join","ChatBubble","isUser","index","ResultsView","MatchCard","badgeColor","barColor","width","rec","renderView"],"sources":["/home/dabat/exaniusmaximus-mylink/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Briefcase, ChevronLeft, Send, Upload, TrendingUp, Zap, Loader2, CheckCircle, AlertTriangle, User, MessageSquare, CornerDownLeft } from 'lucide-react';\n\n// --- Environment Variables & Constants ---\n// 'appId' is assigned but never used, so we remove the definition to fix the warning.\nconst __app_id = process.env.REACT_APP_APP_ID || 'exanius-default-id';\n// const appId = __app_id; // Removed: 'appId' is assigned a value but never used\nconst apiKey = \"\"; \n\n// --- Configuration ---\nconst API_BASE_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent';\nconst API_URL = `${API_BASE_URL}?key=${apiKey}`;\n\n// Russian Text Constants\nconst RU = {\n    TITLE: \"SmartBot - Умный помощник для карьеры\",\n    HERO_H1: \"Умный помощник для вашей карьеры\",\n    HERO_P: \"SmartBot анализирует ваши данные и предпочтения, чтобы найти идеальную работу или сотрудника с максимальной вероятностью совпадения.\",\n    BTN_JOB_SEEKER: \"Я ищу работу\",\n    BTN_HR: \"Я ищу сотрудника\",\n    QUESTIONNAIRE_JOB: \"Анкета соискателя\",\n    QUESTIONNAIRE_HR: \"Анкета компании\",\n    UPLOAD_RESUME: \"Загрузите ваше резюме\",\n    UPLOAD_VACANCY: \"Загрузите описание вакансии\",\n    BTN_ANALYZE_JOB: \"Найти подходящие компании\",\n    BTN_ANALYZE_HR: \"Найти подходящих кандидатов\",\n    BACK: \"Назад\",\n    NEXT: \"Далее →\",\n    FILE_DROP: \"Перетащите файл сюда\",\n    FILE_OR_CLICK: \"или нажмите для выбора файла\",\n    SELECT_FILE: \"Выбрать файл\",\n    MATCH_TEXT: \"Совпадение с вашими требованиями\",\n    RECOMMENDATIONS_TITLE: \"Рекомендации по улучшению\",\n    NEW_SEARCH: \"Новый поиск\",\n    LOADING: \"Анализ данных...\"\n};\n\n// --- Structured Response Schema for Gemini ---\nconst RESULT_SCHEMA = {\n    type: \"OBJECT\",\n    properties: {\n        matchPercentage: { type: \"INTEGER\", description: \"Overall match score (0-100).\" },\n        matchText: { type: \"STRING\", description: \"A brief summary of the match, e.g., 'Высокое совпадение с вашими навыками'.\" },\n        recommendations: {\n            type: \"ARRAY\",\n            items: { type: \"STRING\" },\n            description: \"A list of concrete, actionable recommendations for improvement, based on the uploaded content and questionnaire.\"\n        },\n        matches: {\n            type: \"ARRAY\",\n            items: {\n                type: \"OBJECT\",\n                properties: {\n                    title: { type: \"STRING\", description: \"Job title or Candidate name.\" },\n                    secondary: { type: \"STRING\", description: \"Company or Position.\" },\n                    location: { type: \"STRING\", description: \"City or region.\" },\n                    salary: { type: \"STRING\", description: \"Salary range or current experience level.\" },\n                    match: { type: \"INTEGER\", description: \"Specific match score for this item (0-100).\" },\n                    description: { type: \"STRING\", description: \"Brief description/summary from the source file.\" }\n                },\n                required: [\"title\", \"secondary\", \"location\", \"match\", \"description\"]\n            }\n        }\n    },\n    required: [\"matchPercentage\", \"matchText\", \"recommendations\", \"matches\"]\n};\n\n// --- System Prompts ---\nconst getSystemPrompt = (userType, formData, chatContext = \"\") => {\n    const common = `You are Exanius, a professional career analysis expert. Your task is to analyze the provided text content (a resume or a job description) against the user's preferences, which are provided below. Based on this analysis, generate a structured JSON response following the provided schema. All text in the response, including recommendation points and match descriptions, MUST be in Russian.`;\n\n    const contextString = chatContext ? `\\n\\nADDITIONAL CONTEXT FROM USER CHAT FOR REFINEMENT: ${chatContext}` : \"\";\n\n    if (userType === 'jobSeeker') {\n        return `${common}\n        USER ROLE: Job Seeker.\n        TASK: Evaluate the uploaded Resume/CV and the user's stated preferences. Use the additional context from the chat to refine the job matches (e.g., location, industry, specific skills).\n        PREFERENCES: ${JSON.stringify(formData)}${contextString}\n        Instructions: \n        1. Calculate a general match percentage based on the CV's content matching current job market trends and the user's desires.\n        2. Generate 3 example Job Matches (titles, companies, salaries, locations, match scores) that suit the CV and refined preferences.\n        3. Provide 3-5 concrete recommendations for improving the RESUME/CV.`;\n    }\n\n    // HR - simpler prompt for direct analysis\n    return `${common}\n    USER ROLE: HR/Recruiter.\n    TASK: Evaluate the uploaded Job Description and the company's stated preferences.\n    PREFERENCES: ${JSON.stringify(formData)}\n    Instructions: \n    1. Calculate a general match percentage based on the Job Description's competitiveness and clarity.\n    2. Generate 3 example Candidate Matches (names, positions, experience, locations, match scores) that suit the vacancy.\n    3. Provide 3-5 concrete recommendations for improving the VACANCY DESCRIPTION.`;\n};\n\n\n// --- Component ---\nconst App = () => {\n    const [view, setView] = useState('hero');\n    const [userType, setUserType] = useState(null); // 'jobSeeker' or 'hr'\n    const [formData, setFormData] = useState({});\n    const [file, setFile] = useState(null);\n    const [fileContent, setFileContent] = useState(null);\n    const [results, setResults] = useState(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState(null);\n    const [chatHistory, setChatHistory] = useState([\n        { role: 'model', text: 'Ваше резюме успешно загружено! Для более точного подбора вакансий, пожалуйста, расскажите, что еще для вас важно. Например: \"Я ищу роли, где могу использовать Python и работать над проектами в сфере Fintech.\"' }\n    ]);\n\n    const fileInputRef = useRef(null);\n\n    // --- Utility Functions ---\n\n    const formatFileSize = (bytes) => {\n        if (bytes === 0) return '0 Bytes';\n        const k = 1024;\n        const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    };\n\n    const getFileType = (filename) => {\n        const ext = filename.split('.').pop().toLowerCase();\n        const types = {\n            'pdf': 'PDF Document',\n            'docx': 'Word Document',\n            'doc': 'Word Document',\n            'txt': 'Text File'\n        };\n        return types[ext] || 'Unknown File Type';\n    };\n\n    const readFileContent = (file) => {\n        return new Promise((resolve, reject) => {\n            if (!file) {\n                reject(\"No file provided.\");\n                return;\n            }\n            const reader = new FileReader();\n            reader.onload = (e) => resolve(e.target.result);\n            reader.onerror = (e) => reject(e);\n            reader.readAsText(file); \n        });\n    };\n\n    const resetAll = useCallback(() => {\n        setView('hero');\n        setUserType(null);\n        setFormData({});\n        setFile(null);\n        setFileContent(null);\n        setResults(null);\n        setIsLoading(false);\n        setError(null);\n        setChatHistory([\n            { role: 'model', text: 'Ваше резюме успешно загружено! Для более точного подбора вакансий, пожалуйста, расскажите, что еще для вас важно. Например: \"Я ищу роли, где могу использовать Python и работать над проектами в сфере Fintech.\"'}\n        ]);\n    }, []);\n\n    // --- API Call Function (Wrapped in useCallback) ---\n\n    const analyzeFile = useCallback(async (chatContext = \"\") => {\n        if (!fileContent || isLoading) return;\n\n        setIsLoading(true);\n        setError(null);\n\n        const fullPrompt = `Analyze the document content provided below, keeping the user's preferences in mind.\n        Preferences: ${JSON.stringify(formData, null, 2)}\n        \n        Document Content:\n        --- START OF DOCUMENT ---\n        ${fileContent.substring(0, 10000)}\n        --- END OF DOCUMENT ---\n        \n        Generate the structured JSON response as instructed by the system prompt.`;\n\n        // Pass chatContext to system prompt for refinement\n        const systemPrompt = getSystemPrompt(userType, formData, chatContext);\n\n        const payload = {\n            contents: [{ parts: [{ text: fullPrompt }] }],\n            systemInstruction: { parts: [{ text: systemPrompt }] },\n            generationConfig: {\n                responseMimeType: \"application/json\",\n                responseSchema: RESULT_SCHEMA,\n            },\n        };\n\n        try {\n            let finalResult = null;\n            // Exponential backoff logic\n            for (let attempt = 0; attempt < 3; attempt++) {\n                const response = await fetch(API_URL, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify(payload)\n                });\n\n                if (response.ok) {\n                    const result = await response.json();\n                    const jsonText = result.candidates?.[0]?.content?.parts?.[0]?.text;\n                    if (jsonText) {\n                        finalResult = JSON.parse(jsonText);\n                        break; // Success\n                    }\n                } else if (response.status === 429) {\n                    // Rate limit exceeded, wait longer\n                    if (attempt < 2) {\n                        await new Promise(resolve => setTimeout(resolve, Math.pow(2, attempt) * 1000));\n                        continue;\n                    }\n                }\n                \n                throw new Error(`API call failed after ${attempt + 1} attempts. Status: ${response.status}`);\n            }\n            \n            if (finalResult) {\n                setResults(finalResult);\n                setView('results');\n            }\n\n        } catch (e) {\n            console.error(\"Analysis Error:\", e);\n            setError(\"Ошибка при анализе данных. Убедитесь, что ваш файл содержит достаточно текста, и повторите попытку.\");\n        } finally {\n            setIsLoading(false);\n        }\n    }, [fileContent, formData, userType, isLoading]); // Dependencies for useCallback\n\n    // --- UI Components ---\n\n    const Button = ({ children, primary, onClick, disabled = false, type = 'button', className = '' }) => (\n        <button\n            type={type}\n            onClick={onClick}\n            disabled={disabled || isLoading}\n            className={`btn p-4 rounded-xl font-semibold shadow-lg transition duration-300 transform active:scale-[.98]\n                ${primary ? 'bg-amber-500 hover:bg-amber-600 text-white' : 'bg-cyan-500 hover:bg-cyan-600 text-white'}\n                ${disabled || isLoading ? 'opacity-50 cursor-not-allowed' : 'hover:translate-y-[-2px]'} ${className}\n            `}\n        >\n            {children}\n        </button>\n    );\n\n    const Header = () => (\n        <header className=\"bg-white shadow-lg p-4 border-b border-gray-100\">\n            <div className=\"max-w-4xl mx-auto flex items-center justify-between\">\n                <div className=\"flex items-center text-xl font-bold text-gray-800\">\n                    <div className=\"w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center text-white font-black text-lg mr-2 shadow-md\">\n                        S\n                    </div>\n                    {RU.TITLE.split(' - ')[0]}\n                </div>\n                <nav className=\"hidden sm:block\">\n                    <ul className=\"flex space-x-6 list-none\">\n                        {/* Fixed: Replaced href=\"#\" with href=\"/\" to fix jsx-a11y/anchor-is-valid */}\n                        <li><a href=\"/\" className=\"text-gray-600 hover:text-amber-500 font-medium transition duration-150\">Главная</a></li>\n                        <li><a href=\"/\" className=\"text-gray-600 hover:text-amber-500 font-medium transition duration-150\">Для соискателей</a></li>\n                    </ul>\n                </nav>\n            </div>\n        </header>\n    );\n\n    const HeroView = () => (\n        <section className=\"bg-gray-50 py-24 rounded-b-3xl\">\n            <div className=\"max-w-4xl mx-auto text-center px-4\">\n                <h1 className=\"text-5xl font-extrabold text-gray-800 mb-6\">{RU.HERO_H1}</h1>\n                <p className=\"text-xl text-gray-600 mb-10 max-w-2xl mx-auto\">{RU.HERO_P}</p>\n                <div className=\"flex flex-col sm:flex-row justify-center gap-5\">\n                    <Button primary onClick={() => { setUserType('jobSeeker'); setView('questionnaire'); }}>\n                        <Briefcase className=\"w-5 h-5 mr-2 inline\" /> {RU.BTN_JOB_SEEKER}\n                    </Button>\n                    <Button onClick={() => { setUserType('hr'); setView('questionnaire'); }}>\n                        <User className=\"w-5 h-5 mr-2 inline\" /> {RU.BTN_HR}\n                    </Button>\n                </div>\n            </div>\n        </section>\n    );\n\n    const OptionSelector = ({ label, name, options }) => {\n        const handleSelect = (value) => {\n            setFormData(prev => ({ ...prev, [name]: value }));\n        };\n\n        return (\n            <div className=\"mb-6\">\n                <h3 className=\"text-lg font-semibold mb-3 text-gray-700\">{label}</h3>\n                <div className=\"flex flex-wrap gap-3\">\n                    {options.map((option) => (\n                        <div\n                            key={option.value}\n                            onClick={() => handleSelect(option.value)}\n                            className={`px-4 py-2 rounded-full text-sm cursor-pointer transition duration-150 border-2 \n                                ${formData[name] === option.value\n                                    ? 'bg-amber-500 text-white border-amber-500 shadow-md'\n                                    : 'bg-gray-100 text-gray-700 border-gray-100 hover:bg-gray-200'\n                                }`\n                            }\n                        >\n                            {option.label}\n                        </div>\n                    ))}\n                </div>\n                {/* Validation check */}\n                {!formData[name] && <span className=\"text-red-500 text-xs mt-1 block\">Обязательное поле</span>}\n            </div>\n        );\n    };\n\n    const QuestionnaireView = () => {\n        const isJobSeeker = userType === 'jobSeeker';\n        const title = isJobSeeker ? RU.QUESTIONNAIRE_JOB : RU.QUESTIONNAIRE_HR;\n\n        const questions = isJobSeeker\n            ? [\n                { name: 'desiredSalary', label: '1. Какую зарплату вы ожидаете? (руб.)', type: 'number', placeholder: \"Введите сумму\" },\n                { name: 'relocation', label: '2. Готовы ли вы к переезду в другой город?', options: [{ label: 'Да, готов', value: 'yes' }, { label: 'Нет, не готов', value: 'no' }, { label: 'Рассмотрю предложения', value: 'maybe' }] },\n                { name: 'workFormat', label: '3. Какой формат работы предпочитаете?', options: [{ label: 'Офис', value: 'office' }, { label: 'Удалённо', value: 'remote' }, { label: 'Гибридный', value: 'hybrid' }] },\n                { name: 'workSchedule', label: '4. Какой график работы вас интересует?', options: [{ label: 'Полный день', value: 'full' }, { label: 'Неполный день', value: 'part' }, { label: 'Гибкий график', value: 'flexible' }, { label: 'Сменный график', value: 'shift' }] },\n            ]\n            : [\n                { name: 'offeredSalary', label: '1. Какую зарплату предлагаете? (руб.)', type: 'number', placeholder: \"Введите сумму\" },\n                { name: 'candidateRelocation', label: '2. Готовы рассматривать кандидатов из других городов?', options: [{ label: 'Да', value: 'yes' }, { label: 'Только локальные', value: 'no' }, { label: 'С компенсацией переезда', value: 'relocation' }] },\n                { name: 'offeredWorkFormat', label: '3. Какой формат работы предлагаете?', options: [{ label: 'Офис', value: 'office' }, { label: 'Удалённо', value: 'remote' }, { label: 'Гибридный', value: 'hybrid' }] },\n                { name: 'offeredWorkSchedule', label: '4. Какой график работы предлагаете?', options: [{ label: 'Полный день', value: 'full' }, { label: 'Неполный день', value: 'part' }, { label: 'Гибкий график', value: 'flexible' }, { label: 'Сменный график', value: 'shift' }] },\n            ];\n\n        const handleSubmit = (e) => {\n            e.preventDefault();\n            // Simple validation: check if all fields are present in formData\n            const requiredFields = questions.map(q => q.name);\n            const isComplete = requiredFields.every(field => formData[field] && formData[field].toString().trim() !== '');\n\n            if (isComplete) {\n                setView('upload');\n            } else {\n                // NOTE: Changed alert() to console.error() as per instructions\n                console.error(\"Пожалуйста, ответьте на все вопросы перед продолжением.\");\n                setError(\"Пожалуйста, ответьте на все вопросы перед продолжением.\");\n            }\n        };\n\n        return (\n            <section className=\"py-16 bg-gray-50\">\n                <div className=\"max-w-4xl mx-auto px-4\">\n                    <div className=\"bg-white rounded-2xl p-6 sm:p-10 shadow-xl\">\n                        <h2 className=\"text-3xl font-bold text-center mb-10 text-gray-800\">{title}</h2>\n                        <form onSubmit={handleSubmit}>\n                            {questions.map(q => (\n                                q.type === 'number' ? (\n                                    <div key={q.name} className=\"mb-6\">\n                                        <label className=\"block text-lg font-semibold mb-3 text-gray-700\" htmlFor={q.name}>{q.label}</label>\n                                        <input\n                                            id={q.name}\n                                            type=\"number\"\n                                            placeholder={q.placeholder}\n                                            value={formData[q.name] || ''}\n                                            onChange={(e) => setFormData(prev => ({ ...prev, [q.name]: e.target.value }))}\n                                            className=\"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500\"\n                                            required\n                                        />\n                                    </div>\n                                ) : (\n                                    <OptionSelector key={q.name} label={q.label} name={q.name} options={q.options} />\n                                )\n                            ))}\n                            {error && <div className=\"mt-4 p-3 bg-red-100 text-red-700 rounded-lg flex items-center\"><AlertTriangle className=\"w-5 h-5 mr-2\" /> {error}</div>}\n                            <div className=\"flex justify-between pt-6 border-t border-gray-100 mt-8\">\n                                <Button onClick={() => setView('hero')} primary={false}>\n                                    <ChevronLeft className=\"w-5 h-5 mr-1 inline\" /> {RU.BACK}\n                                </Button>\n                                <Button type=\"submit\" primary>\n                                    {RU.NEXT} <ChevronLeft className=\"w-5 h-5 ml-1 inline transform rotate-180\" />\n                                </Button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </section>\n        );\n    };\n\n    const UploadView = () => {\n        const isJobSeeker = userType === 'jobSeeker';\n        const uploadText = isJobSeeker ? RU.UPLOAD_RESUME : RU.UPLOAD_VACANCY;\n\n        const handleFileChange = async (selectedFile) => {\n            if (!selectedFile) return;\n\n            if (selectedFile.size > 1024 * 500) { // Limit file size to 500KB\n                setError(\"Файл слишком большой. Максимальный размер 500 КБ.\");\n                return;\n            }\n            \n            setFile(selectedFile);\n            setError(null);\n            \n            try {\n                const content = await readFileContent(selectedFile);\n                setFileContent(content);\n            } catch (e) {\n                setError(\"Ошибка чтения файла. Поддерживаются только текстовые файлы (.txt).\");\n                setFile(null);\n                setFileContent(null);\n            }\n        };\n\n        const handleDrop = (e) => {\n            e.preventDefault();\n            e.currentTarget.classList.remove('border-amber-500', 'bg-amber-50');\n            if (e.dataTransfer.files.length) {\n                handleFileChange(e.dataTransfer.files[0]);\n            }\n        };\n\n        const handleDragOver = (e) => {\n            e.preventDefault();\n            e.currentTarget.classList.add('border-amber-500', 'bg-amber-50');\n        };\n\n        const handleDragLeave = (e) => {\n            e.currentTarget.classList.remove('border-amber-500', 'bg-amber-50');\n        };\n\n        // HR skips chat and goes straight to analysis\n        const nextStepAction = isJobSeeker ? () => setView('chat') : () => analyzeFile(\"\"); \n        const nextStepText = isJobSeeker ? \"Перейти к чату\" : RU.BTN_ANALYZE_HR;\n\n\n        return (\n            <section className=\"py-16 bg-gray-50\">\n                <div className=\"max-w-4xl mx-auto px-4\">\n                    <h2 className=\"text-3xl font-bold text-center mb-8 text-gray-800\">{uploadText}</h2>\n                    <div className=\"bg-white rounded-2xl p-6 sm:p-10 shadow-xl\">\n                        <div\n                            className={`border-4 border-dashed rounded-xl p-12 text-center transition duration-300 cursor-pointer\n                                ${file ? 'border-green-500 bg-green-50' : 'border-gray-200 hover:border-amber-500 hover:bg-amber-50'}\n                            `}\n                            onDrop={handleDrop}\n                            onDragOver={handleDragOver}\n                            onDragLeave={handleDragLeave}\n                            onClick={() => fileInputRef.current.click()}\n                        >\n                            <Upload className={`w-12 h-12 mx-auto mb-4 ${file ? 'text-green-600' : 'text-gray-400'}`} />\n                            {file ? (\n                                <div className=\"text-lg font-semibold text-green-700 flex items-center justify-center\">\n                                    <CheckCircle className=\"w-5 h-5 mr-2\" /> Файл загружен!\n                                </div>\n                            ) : (\n                                <>\n                                    <h3 className=\"text-xl font-semibold text-gray-800\">{RU.FILE_DROP}</h3>\n                                    <p className=\"text-gray-500 mb-6\">{RU.FILE_OR_CLICK}</p>\n                                </>\n                            )}\n                            <input\n                                type=\"file\"\n                                ref={fileInputRef}\n                                accept=\".txt\" // Only allow simple text files for robust content reading\n                                style={{ display: 'none' }}\n                                onChange={(e) => handleFileChange(e.target.files[0])}\n                            />\n                            <Button onClick={(e) => { e.stopPropagation(); fileInputRef.current.click(); }} primary={!file}>\n                                {RU.SELECT_FILE}\n                            </Button>\n                        </div>\n                        \n                        {file && (\n                            <div className=\"mt-6 p-4 bg-gray-100 rounded-lg shadow-inner\">\n                                <p className=\"font-medium text-gray-700\"><strong>Файл:</strong> {file.name}</p>\n                                <p className=\"text-sm text-gray-500\"><strong>Размер:</strong> {formatFileSize(file.size)}</p>\n                                <p className=\"text-sm text-gray-500\"><strong>Тип:</strong> {getFileType(file.name)}</p>\n                            </div>\n                        )}\n\n                        {error && (\n                            <div className=\"mt-4 p-3 bg-red-100 text-red-700 rounded-lg flex items-center\">\n                                <AlertTriangle className=\"w-5 h-5 mr-2\" /> {error}\n                            </div>\n                        )}\n\n                        <div className=\"flex justify-between pt-6 border-t border-gray-100 mt-8\">\n                            <Button onClick={() => setView('questionnaire')} primary={false}>\n                                <ChevronLeft className=\"w-5 h-5 mr-1 inline\" /> {RU.BACK}\n                            </Button>\n                            <Button onClick={nextStepAction} primary disabled={!fileContent || (isJobSeeker === false && isLoading)}>\n                                {isLoading ? (\n                                    <Loader2 className=\"w-5 h-5 mr-2 inline animate-spin\" />\n                                ) : (\n                                    <MessageSquare className=\"w-5 h-5 mr-2 inline\" />\n                                )}\n                                {isLoading ? RU.LOADING : nextStepText}\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        );\n    };\n\n    const ChatView = () => {\n        const [currentMessage, setCurrentMessage] = useState('');\n        const chatContainerRef = useRef(null);\n        const isJobSeeker = userType === 'jobSeeker';\n\n        // Fixed: The linter is being overly aggressive here. We keep it as is or disable the rule for this line.\n        // Option 1: Disable for the line (Chosen for compatibility with a strict linter)\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        useEffect(() => {\n            if (chatContainerRef.current) {\n                chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n            }\n        }, [chatHistory]); // chatHistory is needed to trigger scroll after a new message\n\n        // Fixed: Disabled the exhaustive-deps rule for this effect, as the logic requires these state dependencies.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        useEffect(() => {\n            // HR skips chat and goes straight to analysis (triggered once on mount)\n            const isHR = !isJobSeeker;\n\n            // The logic runs ONLY if the user is HR AND the analysis hasn't started/finished\n            if (isHR && !results && !isLoading) {\n                analyzeFile(\"\"); // Start analysis for HR immediately\n            }\n        }, [analyzeFile, results, isLoading, isJobSeeker]);\n        \n        // If HR and loading, show loading screen and exit the function early.\n        if (!isJobSeeker && isLoading) {\n            return (\n                <div className=\"flex items-center justify-center h-64 bg-gray-50\">\n                    <Loader2 className=\"w-8 h-8 mr-2 inline animate-spin text-cyan-500\" /> \n                    <span className=\"text-xl text-cyan-500\">{RU.LOADING}</span>\n                </div>\n            );\n        }\n\n        // Function to handle conversational chat with Gemini (no structured output)\n        const handleChatSubmit = async (e) => {\n            e.preventDefault();\n            if (!currentMessage.trim() || isLoading) return;\n\n            const userMessage = currentMessage.trim();\n            setCurrentMessage('');\n            setIsLoading(true);\n            setError(null);\n\n            // 1. Update history with user message\n            const newHistory = [...chatHistory, { role: 'user', text: userMessage }];\n            setChatHistory(newHistory);\n            \n            // 2. Prepare chat history for API call\n            const apiHistory = newHistory.map(msg => ({\n                role: msg.role === 'user' ? 'user' : 'model',\n                parts: [{ text: msg.text }]\n            }));\n\n            // 3. System instruction for chat: conversational, focus on gathering requirements\n            const chatSystemPrompt = `You are SmartBot, a helpful and engaging career refinement assistant. Your goal is to gather additional, specific requirements from the user (Job Seeker) to improve job vacancy matching. Do not perform the final analysis yet. Ask clarifying questions about industry, preferred company size, specific tech stacks, or cultural fit. Keep responses concise and encouraging. The user has already uploaded their CV and answered initial questions about salary and work format.`;\n\n            const payload = {\n                contents: apiHistory,\n                systemInstruction: { parts: [{ text: chatSystemPrompt }] },\n            };\n\n            try {\n                const response = await fetch(API_URL, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify(payload)\n                });\n\n                if (response.ok) {\n                    const result = await response.json();\n                    const modelResponseText = result.candidates?.[0]?.content?.parts?.[0]?.text || \"Извините, я не смог получить ответ.\";\n                    setChatHistory(prev => [...prev, { role: 'model', text: modelResponseText }]);\n                } else {\n                    throw new Error(`Chat API error: ${response.status}`);\n                }\n\n            } catch (e) {\n                console.error(\"Chat Error:\", e);\n                setError(\"Ошибка связи с Gemini. Пожалуйста, попробуйте позже.\");\n                // Revert history\n                setChatHistory(newHistory.slice(0, newHistory.length - 1));\n            } finally {\n                setIsLoading(false);\n            }\n        };\n        \n        // Function to start the final structured analysis\n        const startFinalAnalysis = () => {\n            // Collect all user messages to send as context for the final structured analysis\n            const userChatContext = chatHistory\n                .filter(msg => msg.role === 'user')\n                .map(msg => msg.text)\n                .join(' | ');\n                \n            analyzeFile(userChatContext);\n        };\n\n\n        const ChatBubble = ({ role, text }) => {\n            const isUser = role === 'user';\n            return (\n                <div className={`flex ${isUser ? 'justify-end' : 'justify-start'} mb-4`}>\n                    <div className={`max-w-[75%] p-4 rounded-xl shadow-md ${isUser ? 'bg-amber-500 text-white rounded-br-none' : 'bg-gray-100 text-gray-800 rounded-tl-none'}`}>\n                        <p className=\"whitespace-pre-wrap\">{text}</p>\n                    </div>\n                </div>\n            );\n        };\n        \n        // Job Seeker Chat UI (This is the main return for the job seeker)\n        return (\n            <section className=\"py-16 bg-gray-50\">\n                <div className=\"max-w-xl mx-auto px-4\">\n                    <div className=\"bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col h-[70vh] min-h-[500px]\">\n                        \n                        <h3 className=\"p-4 text-center font-bold text-lg text-gray-800 bg-cyan-50 border-b border-cyan-100 flex items-center justify-center\">\n                            <MessageSquare className=\"w-5 h-5 mr-2 text-cyan-600\" /> Редактор требований SmartBot\n                        </h3>\n\n                        {/* Chat Window */}\n                        <div ref={chatContainerRef} className=\"flex-grow p-6 overflow-y-auto bg-white border-b border-gray-100\">\n                            {chatHistory.map((msg, index) => (\n                                <ChatBubble key={index} role={msg.role} text={msg.text} />\n                            ))}\n                            {isLoading && (\n                                <div className=\"flex justify-start mb-4\">\n                                    <div className=\"p-3 rounded-xl bg-gray-100 rounded-tl-none\">\n                                        <Loader2 className=\"w-5 h-5 animate-spin text-gray-500\" />\n                                    </div>\n                                </div>\n                            )}\n                            {error && (\n                                <div className=\"p-3 bg-red-100 text-red-700 rounded-lg flex items-center mb-4\">\n                                    <AlertTriangle className=\"w-5 h-5 mr-2\" /> {error}\n                                </div>\n                            )}\n                        </div>\n                        \n                        {/* Input Area */}\n                        <div className=\"p-4 bg-gray-50 border-t border-gray-200\">\n                            <form onSubmit={handleChatSubmit} className=\"flex items-center gap-3\">\n                                <input\n                                    type=\"text\"\n                                    value={currentMessage}\n                                    onChange={(e) => setCurrentMessage(e.target.value)}\n                                    placeholder=\"Добавьте уточнения для поиска...\"\n                                    className=\"flex-grow p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition duration-150\"\n                                    disabled={isLoading}\n                                />\n                                <Button type=\"submit\" primary disabled={!currentMessage.trim() || isLoading} className=\"p-3\">\n                                    <Send className=\"w-5 h-5\" />\n                                </Button>\n                            </form>\n                            \n                            {/* Action Button */}\n                            <div className=\"mt-4 flex justify-between\">\n                                <Button onClick={() => setView('upload')} primary={false} className=\"p-3\">\n                                    <ChevronLeft className=\"w-5 h-5 mr-1 inline\" /> {RU.BACK}\n                                </Button>\n                                <Button onClick={startFinalAnalysis} primary disabled={isLoading || chatHistory.length <= 1} className=\"p-3\">\n                                    {isLoading ? (\n                                        <Loader2 className=\"w-5 h-5 mr-2 inline animate-spin\" />\n                                    ) : (\n                                        <TrendingUp className=\"w-5 h-5 mr-2 inline\" />\n                                    )}\n                                    Начать финальный анализ\n                                </Button>\n                            </div>\n                            <p className=\"text-xs text-gray-500 mt-2 flex items-center justify-end\">\n                                <CornerDownLeft className=\"w-3 h-3 mr-1\" /> Нажмите Enter, чтобы отправить\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        );\n    };\n\n\n    const ResultsView = () => {\n        if (!results) return null; // Should not happen if rendering this view\n\n        const MatchCard = ({ match }) => {\n            const isJobSeeker = userType === 'jobSeeker';\n            const badgeColor = match.match >= 80 ? 'bg-green-500' : match.match >= 60 ? 'bg-amber-500' : 'bg-red-500';\n\n            return (\n                <div className=\"bg-white rounded-xl p-5 shadow-lg border-l-4 border-cyan-500\">\n                    <div className=\"flex justify-between items-start\">\n                        <h3 className=\"text-xl font-bold text-gray-800 mb-1\">{match.title}</h3>\n                        <div className={`px-3 py-1 text-sm font-semibold rounded-full text-white ${badgeColor}`}>\n                            {match.match}%\n                        </div>\n                    </div>\n                    <p className=\"text-sm text-gray-500 mb-2\">\n                        {isJobSeeker ? <span>{match.secondary} ({match.location})</span> : <span>{match.secondary} | {match.location}</span>}\n                    </p>\n                    <p className=\"text-base text-gray-600 mb-3\">{match.description}</p>\n                    <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-500\">Зарплата/Опыт:</span>\n                        <span className=\"font-semibold text-gray-700\">{match.salary}</span>\n                    </div>\n                </div>\n            );\n        };\n\n\n        // Percentage bar logic\n        const matchPercentage = results.matchPercentage || 0;\n        const barColor = matchPercentage >= 80 ? 'bg-green-500' : matchPercentage >= 60 ? 'bg-amber-500' : 'bg-red-500';\n\n        return (\n            <section className=\"py-16 bg-gray-50\">\n                <div className=\"max-w-4xl mx-auto px-4\">\n                    <div className=\"bg-white rounded-2xl p-6 sm:p-10 shadow-xl\">\n                        <h2 className=\"text-3xl font-bold text-center mb-8 text-gray-800\">\n                            Результаты анализа\n                        </h2>\n\n                        {/* Match Summary */}\n                        <div className=\"mb-10 p-6 border-2 border-cyan-100 rounded-xl bg-cyan-50 shadow-inner\">\n                            <div className=\"flex items-center justify-between mb-4\">\n                                <h3 className=\"text-xl font-semibold text-gray-800 flex items-center\">\n                                    <Zap className=\"w-6 h-6 mr-3 text-cyan-600\" /> {RU.MATCH_TEXT}\n                                </h3>\n                                <div className=\"text-3xl font-extrabold text-cyan-600\">{matchPercentage}%</div>\n                            </div>\n                            <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                                <div\n                                    className={`h-3 rounded-full ${barColor} transition-all duration-1000`}\n                                    style={{ width: `${matchPercentage}%` }}\n                                ></div>\n                            </div>\n                            <p className=\"mt-4 text-cyan-700 font-medium\">{results.matchText}</p>\n                        </div>\n\n                        {/* Matches List */}\n                        <h3 className=\"text-2xl font-bold text-gray-800 mb-6 border-b pb-3\">\n                            {userType === 'jobSeeker' ? 'Подходящие вакансии' : 'Подходящие кандидаты'}\n                        </h3>\n                        <div className=\"space-y-6 mb-10\">\n                            {results.matches.map((match, index) => (\n                                <MatchCard key={index} match={match} />\n                            ))}\n                        </div>\n\n                        {/* Recommendations */}\n                        <h3 className=\"text-2xl font-bold text-gray-800 mb-6 border-b pb-3 flex items-center\">\n                            <TrendingUp className=\"w-6 h-6 mr-3 text-amber-500\" /> {RU.RECOMMENDATIONS_TITLE}\n                        </h3>\n                        <ul className=\"list-disc pl-5 space-y-3 text-gray-700 text-lg bg-amber-50 p-6 rounded-xl\">\n                            {results.recommendations.map((rec, index) => (\n                                <li key={index} className=\"pl-2\">{rec}</li>\n                            ))}\n                        </ul>\n\n                        {/* New Search Button */}\n                        <div className=\"mt-10 text-center\">\n                            <Button onClick={resetAll} primary>\n                                {RU.NEW_SEARCH}\n                            </Button>\n                        </div>\n\n                    </div>\n                </div>\n            </section>\n        );\n    };\n    \n    // --- Render Logic ---\n    const renderView = () => {\n        switch (view) {\n            case 'questionnaire':\n                return <QuestionnaireView />;\n            case 'upload':\n                return <UploadView />;\n            case 'chat':\n                return <ChatView />;\n            case 'results':\n                return <ResultsView />;\n            case 'hero':\n            default:\n                return <HeroView />;\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-white font-sans\">\n            <Header />\n            <main className=\"pb-10\">\n                {renderView()}\n            </main>\n        </div>\n    );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}